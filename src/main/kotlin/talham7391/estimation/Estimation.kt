/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package talham7391.estimation

class Estimation(players: Collection<Player>) {
    val players = players.map { createPlayerInGame(it) }
    val cardsOnTable = mutableListOf<Card>()

    private var turnOf: Player
    private val trick: Trick? = null
    private var gameOver = false

    init {
        val deck = newDeck().toMutableList()
        val deckSize = deck.size
        for (player in this.players) {
            val cards = deck.randomlyTake(deckSize / players.size)
            player.cardsInHand.addAll(cards)
        }
        turnOf = this.players[0]
    }


}

class GameOver : Exception("This game is over")

data class NotPlayersTurn(val playerId: String) : Exception("Not $playerId's turn")

data class PlayerInGame(
    val player: Player,
    val cardsInHand: MutableCollection<Card>
) : Player by player

fun createPlayerInGame(player: Player): PlayerInGame {
    return PlayerInGame(player, mutableListOf<Card>())
}